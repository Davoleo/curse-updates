"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.commands=void 0;var cfg_json_1=require("../cfg.json");var query_1=require("./query");var utils_1=require("./utils");exports.commands=new Map;exports.commands.set("ping",function(message){message.channel.send("PONG! - Response Time: "+message.client.ws.ping+"ms")});exports.commands.set("changeprefix",function(msg){var message=msg.content;if(message!==""){message=message.replace(cfg_json_1.default.prefix+"changeprefix ","");if(message.length>3){msg.channel.send("You can assign a string of up to 3 characters as prefix!")}else{utils_1.Utils.savePrefix(message);msg.channel.send("`"+message+"` is now the current prefix for commands")}}});exports.commands.set("latest",function(message){var id=message.content.replace(cfg_json_1.default.prefix+"latest ","");if(id!==""){var response=query_1.cfquery.queryLatest(id);if(response!==undefined&&response!==null){message.channel.send(response)}}});exports.commands.set("schedule add",function(message){if(message.guild!=undefined&&message.guild.available){utils_1.Utils.initSaveGuild(message.guild.id);var projectID=message.content.replace(cfg_json_1.default.prefix+"schedule add ","");utils_1.Utils.addProjectToConfig(message.guild.id,projectID)}});exports.commands.set("schedule show",function(message){if(message.guild!=undefined&&message.guild.available){utils_1.Utils.initSaveGuild(message.guild.id);var scheduledProjects=utils_1.Utils.buildScheduleEmbed(message.guild.id);message.channel.send(scheduledProjects)}});exports.commands.set("test",function(message){if(message.guild!=undefined&&message.guild.available){utils_1.Utils.initSaveGuild(message.guild.id)}});exports.commands.set("help",function(message){var embed=utils_1.Utils.createEmbed();embed.addFields([{name:cfg_json_1.default.prefix+"ping",value:"Sends a message with information about the latency of the bot response"},{name:cfg_json_1.default.prefix+"changeprefix `<prefix>`",value:"Changes the command prefix of the bot to the char passed as argument - the prefix is reset to `|` after a bot restart"},{name:cfg_json_1.default.prefix+"latest `<projectID>`",value:"Queries Curseforge to get the latest version of a mod or modpack"},{name:cfg_json_1.default.prefix+"schedule add `<projectID>`",value:"Adds a Curseforge project to the scheduled check that runs once every 15 minutes per entry"},{name:cfg_json_1.default.prefix+"help",value:"Shows this embed with a list of all the available commands and their usage and descriptions"}]);message.channel.send(embed)});
